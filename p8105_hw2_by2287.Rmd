---
title: "p8105_hw2_by2287"
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
library(readr)
library(readxl)
```


## Problem 1 

Read in & clean the trash-wheel dataset
```{r read in & clean in trash_wheel data}
trash_wheel = read_xlsx(
                  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                  sheet = 1, 
                  skip = 1,
                  range = cell_cols("A:N")) %>% 
	        janitor::clean_names() %>% 
          filter(dumpster != "NA") %>% 
            mutate(
              sports_balls = round(sports_balls),
              sports_balls = as.integer(sports_balls)
            ) 
```

The dataset trash_wheel consists of `r nrow(trash_wheel)` rows and `r ncol(trash_wheel)` columns. It includes 
columns that capture information on things like the total amount of `r trash_wheel %>% select(plastic_bottles, grocery_bags, sports_balls) %>% names()` 
collected by Mr Trash Wheel, by year. For instance, the median sport balls collected by My Trash Wheel in 2017 was `r trash_wheel %>% filter(year == 2017) %>% pull(sports_balls) %>% median()`.


Read in & clean the precipitation data for 2017 & 2018
```{r read in 2017 & 2018 precipitation data}
precip_2017 = read_xlsx(
                  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                  sheet = "2017 Precipitation",
                  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)


precip_2018 = read_xlsx(
                  path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                  sheet = "2018 Precipitation", 
                  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
   relocate(year)
                  

precip_df = bind_rows(precip_2017, precip_2018)


precip_df = precip_df %>% 
      mutate(month = month.name[month])
```

The data set precip_df, which contains the combined information of the 2017 & 2018 precipitation data, 
consists of `r nrow(precip_df)` rows and `r ncol(precip_df)` columns. It contains information, on the 
year, month, and the corresponding total precipitation. In the year 2017, the median precipitation was 
`r precip_df %>% filter(year == 2017) %>% pull(total) %>% median() %>% round(2)` whereas 2018 saw a median precipitation of
`r precip_df %>% filter(year == 2018) %>% pull(total) %>% median() %>% round(2)`.

## Problem 2
Read and clean the nyc_transit data
```{r read nyc_transit data}
nyc_transit = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
              janitor::clean_names() %>% 
              select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
              mutate(
                entry = ifelse(entry == "YES", 1, 0)
                ) 
```

The data set nyc_transit is cleaner version of the NYC_Transit_Subway_Entrance_And_Exit_Data. It consists of `r nrow(nyc_transit)` rows and `r ncol(nyc_transit)` columns. It contains information on different subway stations in New York City, and has, in it, variables such as: `r nyc_transit %>% select(line:station_longitude, entrance_type) %>% names()`. The cleaning steps includes, converting the variable names to snake_case, selecting only relevant variables, and re-coding the `entry` variable from YES/NO to 1/0. In addition to these, it also contains information on what routes they take, and whether or not the stations are ADA compliant. These data are tidy. 


From the nyc_transit data set, we can tell that there are `r nyc_transit %>% distinct(line,station_name) %>% count()` distinct stations. 
Of those distinct stations, `r nyc_transit %>% filter(ada == TRUE) %>% distinct(line, station_name) %>% count()` are ADA compliant. 


#What proportion of station entrances / exits without vending allow entrance?
The proportion of station entrances / exits without vending that allow entrance is:
`r (nyc_transit %>% select(entrance_type, vending, entry, line, station_name) %>% filter(entry == 1 & vending == "NO") %>% distinct() %>% count() / nyc_transit %>% distinct(line,station_name) %>% count()) * 100 %>% round(2)`




Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?

`r nyc_transit %>% pull(entrance_type) %>% table()`



